<!--
 (c) Copyright Ascensio System SIA 2020

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>OpenAI</title>
    <script type="text/javascript" src="https://onlyoffice.github.io/sdkjs-plugins/v1/plugins.js"></script>
    <script type="text/javascript" src="https://onlyoffice.github.io/sdkjs-plugins/v1/plugins-ui.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="vendor/select2-4.0.13/js/select2.js"></script>
    <script type="text/javascript" src="scripts/code.js"></script>
    <link rel="stylesheet" href="https://onlyoffice.github.io/sdkjs-plugins/v1/plugins.css">
	<link rel="stylesheet" href="vendor/select2-4.0.13/css/select2.css"/>
    <link rel="stylesheet" href="./resources/css/styles.css">
</head>
<body>
	<div id="div_config" class="div_config hidden">
		<div>
			<span class="i18n">To use OpenAI you should get an API key.</span> <span class="i18n">Navigate to</span> <a target="_blank" href="https://beta.openai.com/account/api-keys">OpenAI API keys</a>. <span class="i18n">Create and copy API key into the field below.</span>
		</div>
		<div class="mrtop label">
			<label class="header">API Key</span>
				<div>
					<input id="apiKeyField" class="form-control" type="text" placeholder="API Key" style="width: 100%;" autocomplete="off"/>
				</div>
		</div>
		<button id="btn_saveConfig" class="btn-text-default i18n" style="margin-top: 16px; width: 100%;">Save</button>
		<div id="apiKeyError" class="hidden" style="padding-top: 15px;">
			<label id="lb_key_err" style="color:red"></label>
			<br>
			<label id="lb_key_err_mes"></label>
		</div>
	</div>
	<div id="div_content" class="div_content hidden">
		<div class="div_form">
			<textarea id="textarea" class="form-control"></textarea>
			<div class="div_req_btn">
				<button id="btn_req" class="btn-text-default btn_req i18n">Make request</button>
				<button id="btn_clear" class="btn-text-default btn_req i18n">Clear field</button>
			</div>
		</div>
		<div class="div_settings">
			<div class="div_parametr" title="The model which will generate the completion. Some models are suitable for natural language tasks, others specialize in code.">
				<label class="header">Model</label>
				<select id="sel_models" class="form_control"></select>
			</div>
			<div class="div_parametr" title="The maximum number of tokens to generate in the completion.">
				<div class="div_param_name">
					<label class="header">Maximum length</label>
					<input id="inp_len" type="text" value="256" class="inp_value form-control">
				</div>
				<input id="inp_len_sl" type="range" min="1" max="4096" step="1" value="256">
			</div>
			<div class="div_parametr" title="Controls randomness: Lowering results in less random completions. As the temperature approaches zero, the node will become deterministic and repetitive.">
				<div class="div_param_name">
					<label class="header">Temperature</label>
					<input id="inp_temp" type="text" value="0" class="inp_value form-control">
				</div>
				<input id="inp_temp_sl" type="range" min="0" max="1" step="0.01" value="0">	
			</div>
			<div class="div_parametr" title="An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass.">
				<div class="div_param_name">
					<label class="header">Top P</label>
					<input id="inp_top" type="text" value="1" class="inp_value form-control">
				</div>
				<input id="inp_top_sl" type="range" min="0" max="1" step="0.01" value="1">
			</div>
			<div class="div_parametr" title="Up to four sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence.">
				<label class="header">Stop sequences</label>
				<input id="inp_stop" type="text" class="form-control">
			</div>

		</div>
		<div id="div_err" class="hidden">
			<label style="color: red;">Error:</label>
			<br>
			<label id="lb_err"></label>
		</div>
		<div id="footerCont">
			<label id="logoutLink" class="link i18n">Reconfigure</label>
		</div>
	</div>
	<div id="loader-container" class="asc-loader-container loader hidden"></div>
</body>
</html>